# Template file for 'duckstation_libretro'
pkgname=duckstation_libretro
version=0.20201025
_gitrev=8f579f3cfa4406279deef035881e50085ee5efc7
revision=1
wrksrc="duckstation-${_gitrev}"
build_style=cmake
short_desc="duckstation"
configure_args="-DBUILD_LIBRETRO_CORE=ON -DBUILD_QT_FRONTEND=OFF -DBUILD_SDL_FRONTEND=OFF -DCMAKE_BUILD_TYPE=Release -DCMAKE_VERBOSE_MAKEFILE=ON -DENABLE_DISCORD_PRESENCE=OFF -DUSE_SDL2=OFF -DUSE_X11=OFF -DUSE_EGL=OFF"
maintainer="valadaa48 <valadaa48@gmx.com>"
hostmakedepends="pkg-config python unzip cmake rsync"
makedepends="libdrm-devel alsa-lib-devel"
license="GPL-2.0-or-later"
homepage="https://github.com/libretro/duckstation"
distfiles="https://github.com/stenzek/duckstation/archive/${_gitrev}.tar.gz"
checksum=4210442ff7b6aa0b185e22e232e2c8f87fc62e73a9947c44b1c1c6b1e9a39536

post_extract() {
    # Software is threaded and faster than GL (mali)
#    cd ${wrksrc}
    vsed -i src/duckstation-libretro/libretro_host_interface.cpp -e 's/   "OpenGL"/   "Software"/'
}
